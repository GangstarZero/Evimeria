CREATE TABLE user (
	id INT AUTO_INCREMENT NOT NULL,
    email VARCHAR(100) NOT NULL,
    name VARCHAR(100) NOT NULL,
    password VARCHAR(100) NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE company (
	id INT AUTO_INCREMENT NOT NULL,
    email VARCHAR(100) NOT NULL,
    name VARCHAR(100) NOT NULL,
    password VARCHAR(100) NOT NULL,
    address VARCHAR(1000) NOT NULL,
    description TEXT NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE title (
	id INT AUTO_INCREMENT NOT NULL,
    name VARCHAR(100) NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE job (
	id INT AUTO_INCREMENT NOT NULL,
    companyId INT NOT NULL,
    titleId INT NOT NULL,
    description TEXT NOT NULL,
    poster VARCHAR(100) NOT NULL,
    created_at DATETIME NOT NULL,
    updated_at DATETIME NOT NULL,
    PRIMARY KEY(id),
    CONSTRAINT `fk_job_company_id`
    	FOREIGN KEY (companyId)
    	REFERENCES company (id)
    	ON DELETE CASCADE,
    CONSTRAINT `fk_job_title_id`
    	FOREIGN KEY (titleId)
    	REFERENCES title (id)
    	ON DELETE CASCADE
);

CREATE TABLE apply_job (
    id INT AUTO_INCREMENT NOT NULL,
	jobId INT NOT NULL,
    userId INT NOT NULL,
    fullName VARCHAR(100) NOT NULL,
    phoneNumber VARCHAR(100) NOT NULL,
    salaryExpectation VARCHAR(100) NOT NULL,
    cv VARCHAR(100) NOT NULL,
    status VARCHAR(20) NOT NULL,
    created_at DATETIME NOT NULL,
    updated_at DATETIME NOT NULL,
    PRIMARY KEY (id),
    CONSTRAINT `fk_apply_job_job_id`
    	FOREIGN KEY (jobId)
    	REFERENCES job (id)
    	ON DELETE CASCADE,
    CONSTRAINT `fk_apply_job_user_id`
    	FOREIGN KEY (userId)
    	REFERENCES user (id)
    	ON DELETE CASCADE
);

CREATE TABLE chat_room (
	id INT AUTO_INCREMENT NOT NULL,
    user_id INT NOT NULL,
    company_id INT NOT NULL,
    PRIMARY KEY (id),
    CONSTRAINT `fk_chat_room_user_id`
    	FOREIGN KEY (user_id)
    	REFERENCES user (id)
    	ON DELETE CASCADE,
    CONSTRAINT `fk_chat_room_company_id`
    	FOREIGN KEY (company_id)
    	REFERENCES company (id)
    	ON DELETE CASCADE
);

CREATE TABLE chat (
	id INT AUTO_INCREMENT NOT NULL,
    chat_room_id INT NOT NULL,
    is_sender_user BOOLEAN NOT NULL,
    content VARCHAR(1000) NOT NULL,
    created_at DATETIME NOT NULL,
    updated_at DATETIME NOT NULL,
    PRIMARY KEY (id),
    CONSTRAINT `fk_chat_chat_room_id`
    	FOREIGN KEY (chat_room_id)
    	REFERENCES chat_room (id)
    	ON DELETE CASCADE
);

INSERT INTO user (email, name, password) VALUES ('user1@gmail.com', 'user1', 'user1');
INSERT INTO user (email, name, password) VALUES ('user2@gmail.com', 'user2', 'user2');

INSERT INTO company (email, name, password, address, description) VALUES ('company1@gmail.com', 'company1', 'company1', 'company1 address', 'company1 description');
INSERT INTO company (email, name, password, address, description) VALUES ('company2@gmail.com', 'company2', 'company2', 'company2 address', 'company2 description');

INSERT INTO title (name) VALUES ('FrontEnd');
INSERT INTO title (name) VALUES ('BackEnd');
INSERT INTO title (name) VALUES ('FullStack');
INSERT INTO title (name) VALUES ('DevOps');
INSERT INTO title (name) VALUES ('QA');

INSERT INTO job (companyId, titleId, description, poster, created_at, updated_at) VALUES (1, 1, 'desc1', 'assets/poster/andrew.png', NOW(), NOW());
INSERT INTO job (companyId, titleId, description, poster, created_at, updated_at) VALUES (1, 2, 'desc2', 'assets/poster/minion.jpg', NOW(), NOW());
INSERT INTO job (companyId, titleId, description, poster, created_at, updated_at) VALUES (1, 3, 'desc3', 'assets/poster/minion.jpg', NOW(), NOW());
INSERT INTO job (companyId, titleId, description, poster, created_at, updated_at) VALUES (2, 1, 'desc4', 'assets/poster/naruto.jpg', NOW(), NOW());
INSERT INTO job (companyId, titleId, description, poster, created_at, updated_at) VALUES (2, 2, 'desc5', 'assets/poster/spongebob.webp', NOW(), NOW());
INSERT INTO job (companyId, titleId, description, poster, created_at, updated_at) VALUES (2, 3, 'desc6', 'assets/poster/patrick.jpg', NOW(), NOW());

INSERT INTO chat_room (user_id, company_id) VALUES (1, 1);

INSERT INTO chat (chat_room_id, is_sender_user, content) VALUES (1, 1, 'halo');
INSERT INTO chat (chat_room_id, is_sender_user, content) VALUES (1, 0, 'hai');